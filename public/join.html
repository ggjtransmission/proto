<!DOCTYPE html>
<html>
<head>
   <title>
      Plague Party!
   </title>
   <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
   <link rel="stylesheet" href="https://www.w3schools.com/lib/w3-colors-flat.css">
   <meta name="viewport" content="width=device-width, initial-scale=1">

   <script src="http://code.jquery.com/jquery-2.2.4.min.js"></script>
   <script type="text/javascript">
      s = new WebSocket("ws://"+location.hostname+":" + location.port);

      s.onopen = function(){
         console.log("Opened Socket");
      }

      s.onclosed = function(){
         console.log("Closed Socket");
      }

      s.onmessage = function(m)
      {
         var data = JSON.parse(m.data);
         processMessage(data);
      }

      function processMessage(data)
      {
         switch(data.type)
         {
            case "time":
            // console.log("update time");
               updateTime(data.message);
            break;
            case "register":

            break;
         }
      }

      //Adds a user to the game.
      function register() {
         var messageObject = {
            type: "register",
            name: $("#player_name").val()
         }
         s.send(JSON.stringify(messageObject));
      }

      function sendStart(){
            var messageObject = {
            type: "start",
         }
         s.send(JSON.stringify(messageObject));
      }

      function updateTime(time){
         var min = Math.floor(time / 60);
         var sec = time - min * 60;
         var prettyTime = min + ":" + sec;
         $("#timeRemaining").html(prettyTime);
      }

      $(document).ready(function(){
         // $(register_button).click(function()
         // {
         //    register();
         // })

         // $(start_game).click(function(){
         //    sendStart();
         // })

         $("#instructions_button").click(function(){
            console.log("show instructions");
         });

         $("#credits_button").click(function(){
            console.log("show credits");
         });

      })

      function switchPage(pageId)
      {
         $(".page").hide();
         $("#"+pageId).show();
      }

   </script>


</head>
<body>

<header class="w3-container w3-flat-midnight-blue">
   <center>
  <h1><i>Plague Party!</i></h1>
</center>
</header>

<div class="w3-cell-row">
  <div class="w3-cell">
  </div>
  <div class="w3-cell w3-container">
   <div class="page" id="start_page" >

      <p>Enter Your name: <input id="player_name" type="text" name="name"/></p>
      <center>
         <button id="join_button">Join Game</button>
         <script type="text/javascript">
            document.getElementById("join_button").onclick = function () {
               location.href = "lobby.html";
            }
         </script>
      </center>
   </div>
  </div>
</div>

<footer class="w3-container w3-flat-midnight-blue">
  <button id="instructions_button">Instructions</button>
  <button id="credits_button">Credits</button>
         <script type="text/javascript">
            document.getElementById("credits_button").onclick = function () {
               location.href = "home.html";
            }
         </script>
</footer>


</body>
</html>